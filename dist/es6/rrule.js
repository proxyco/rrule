/*! For license information please see rrule.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("luxon")):"function"==typeof define&&define.amd?define(["luxon"],e):"object"==typeof exports?exports.rrule=e(require("luxon")):t.rrule=e(t.luxon)}("undefined"!=typeof self?self:this,(function(t){return(()=>{"use strict";var e={382:(t,e,n)=>{n.d(e,{EN:()=>r,hj:()=>s,kJ:()=>a,w6:()=>i,rx:()=>o,qo:()=>h,Sk:()=>l,Vl:()=>d,Vy:()=>u,qq:()=>c,cS:()=>y,Dw:()=>f,q9:()=>m});const r=function(t){return null!=t},s=function(t){return"number"==typeof t},a=Array.isArray,i=function(t,e=t){1===arguments.length&&(e=t,t=0);const n=[];for(let r=t;r<e;r++)n.push(r);return n},o=function(t,e){let n=0;const r=[];if(a(t))for(;n<e;n++)r[n]=[].concat(t);else for(;n<e;n++)r[n]=t;return r},h=function(t){return a(t)?t:[t]};function l(t,e,n=" "){const r=String(t);return e>>=0,r.length>e?String(r):((e-=r.length)>n.length&&(n+=o(n,e/n.length)),n.slice(0,e)+String(r))}const d=function(t,e,n){const r=t.split(e);return n?r.slice(0,n).concat([r.slice(n).join(e)]):r},u=function(t,e){const n=t%e;return n*e<0?n+e:n},c=function(t,e){return{div:Math.floor(t/e),mod:u(t,e)}},y=function(t){return!r(t)||0===t.length},f=function(t){return!y(t)},m=function(t,e){return f(t)&&-1!==t.indexOf(e)}},906:(t,e,n)=>{n.r(e),n.d(e,{Frequency:()=>d,RRule:()=>et,RRuleSet:()=>ot,Weekday:()=>y,default:()=>ut,rrulestr:()=>rt});var r,s=n(382);!function(t){t.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],t.ONE_DAY=864e5,t.MAXYEAR=9999,t.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),t.PY_WEEKDAYS=[6,0,1,2,3,4,5],t.getYearDay=function(e){const n=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((n.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/t.ONE_DAY)+1},t.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},t.isDate=function(t){return t instanceof Date},t.isValidDate=function(e){return t.isDate(e)&&!isNaN(e.getTime())},t.tzOffset=function(t){return 60*t.getTimezoneOffset()*1e3},t.daysBetween=function(e,n){const r=e.getTime()-t.tzOffset(e)-(n.getTime()-t.tzOffset(n));return Math.round(r/t.ONE_DAY)},t.toOrdinal=function(e){return t.daysBetween(e,t.ORDINAL_BASE)},t.fromOrdinal=function(e){return new Date(t.ORDINAL_BASE.getTime()+e*t.ONE_DAY)},t.getMonthDays=function(e){const n=e.getUTCMonth();return 1===n&&t.isLeapYear(e.getUTCFullYear())?29:t.MONTH_DAYS[n]},t.getWeekday=function(e){return t.PY_WEEKDAYS[e.getUTCDay()]},t.monthRange=function(e,n){const r=new Date(Date.UTC(e,n,1));return[t.getWeekday(r),t.getMonthDays(r)]},t.combine=function(t,e){return e=e||t,new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},t.clone=function(t){return new Date(t.getTime())},t.cloneDates=function(e){const n=[];for(let r=0;r<e.length;r++)n.push(t.clone(e[r]));return n},t.sort=function(t){t.sort((function(t,e){return t.getTime()-e.getTime()}))},t.toRfc5545DateTime=function(t,e=!0){const n=new Date(t);return[(0,s.Sk)(n.getUTCFullYear().toString(),4,"0"),(0,s.Sk)(n.getUTCMonth()+1,2,"0"),(0,s.Sk)(n.getUTCDate(),2,"0"),"T",(0,s.Sk)(n.getUTCHours(),2,"0"),(0,s.Sk)(n.getUTCMinutes(),2,"0"),(0,s.Sk)(n.getUTCSeconds(),2,"0"),e?"Z":""].join("")},t.toRfc5545Date=function(t){const e=new Date(t);return[(0,s.Sk)(e.getUTCFullYear().toString(),4,"0"),(0,s.Sk)(e.getUTCMonth()+1,2,"0"),(0,s.Sk)(e.getUTCDate(),2,"0")].join("")},t.fromRfc5545DateTime=function(t){const e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/.exec(t);if(!e)throw new Error(`Invalid date-time value: ${t}`);return new Date(Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[5],10)||0,parseInt(e[6],10)||0,parseInt(e[7],10)||0))},t.fromRfc5545Date=function(t){const e=/^(\d{4})(\d{2})(\d{2})$/.exec(t);if(!e)throw new Error(`Invalid date value: ${t}`);return new Date(Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10)))}}(r||(r={}));const a=r;class i{constructor(t,e){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=e,"between"===t?(this.maxDate=e.inc?e.before:new Date(e.before.getTime()-1),this.minDate=e.inc?e.after:new Date(e.after.getTime()+1)):"before"===t?this.maxDate=e.inc?e.dt:new Date(e.dt.getTime()-1):"after"===t&&(this.minDate=e.inc?e.dt:new Date(e.dt.getTime()+1))}accept(t){++this.total;const e=this.minDate&&t<this.minDate,n=this.maxDate&&t>this.maxDate;if("between"===this.method){if(e)return!0;if(n)return!1}else if("before"===this.method){if(n)return!1}else if("after"===this.method)return!!e||(this.add(t),!1);return this.add(t)}add(t){return this._result.push(t),!0}getValue(){const t=this._result;switch(this.method){case"all":case"between":return t;case"before":case"after":default:return t.length?t[t.length-1]:null}}clone(){return new i(this.method,this.args)}}class o extends i{constructor(t,e,n){super(t,e),this.iterator=n}add(t){return!!this.iterator(t,this._result.length)&&(this._result.push(t),!0)}}var h,l,d;function u(t){return t<d.HOURLY}!function(t){t.START="DTSTART",t.END="DTEND"}(h||(h={})),function(t){t.DATE="DATE",t.DATE_TIME="DATE-TIME"}(l||(l={})),function(t){t[t.YEARLY=0]="YEARLY",t[t.MONTHLY=1]="MONTHLY",t[t.WEEKLY=2]="WEEKLY",t[t.DAILY=3]="DAILY",t[t.HOURLY=4]="HOURLY",t[t.MINUTELY=5]="MINUTELY",t[t.SECONDLY=6]="SECONDLY"}(d||(d={}));const c=["MO","TU","WE","TH","FR","SA","SU"];class y{constructor(t,e){if(0===e)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=e}nth(t){return this.n===t?this:new y(this.weekday,t)}equals(t){return this.weekday===t.weekday&&this.n===t.n}toString(){let t=c[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t}getJsWeekday(){return 6===this.weekday?0:this.weekday+1}}class f{constructor(t,e,n,r){this.hour=t,this.minute=e,this.second=n,this.millisecond=r||0}getHours(){return this.hour}getMinutes(){return this.minute}getSeconds(){return this.second}getMilliseconds(){return this.millisecond}getTime(){return 1e3*(60*this.hour*60+60*this.minute+this.second)+this.millisecond}}class m extends f{constructor(t,e,n,r,s,a,i){super(r,s,a,i),this.year=t,this.month=e,this.day=n}static fromDate(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)}getWeekday(){return r.getWeekday(new Date(this.getTime()))}getTime(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()}getDay(){return this.day}getMonth(){return this.month}getYear(){return this.year}addYears(t){this.year+=t}addMonths(t){if(this.month+=t,this.month>12){const t=Math.floor(this.month/12),e=(0,s.Vy)(this.month,12);this.month=e,this.year+=t,0===this.month&&(this.month=12,--this.year)}}addWeekly(t,e){e>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-e))+7*t:this.day+=-(this.getWeekday()-e)+7*t,this.fixDay()}addDaily(t){this.day+=t,this.fixDay()}addHours(t,e,n){for(e&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;const{div:e,mod:r}=(0,s.qq)(this.hour,24);if(e&&(this.hour=r,this.addDaily(e)),(0,s.cS)(n)||(0,s.q9)(n,this.hour))break}}addMinutes(t,e,n,r){for(e&&(this.minute+=Math.floor((1439-(60*this.hour+this.minute))/t)*t);;){this.minute+=t;const{div:e,mod:a}=(0,s.qq)(this.minute,60);if(e&&(this.minute=a,this.addHours(e,!1,n)),((0,s.cS)(n)||(0,s.q9)(n,this.hour))&&((0,s.cS)(r)||(0,s.q9)(r,this.minute)))break}}addSeconds(t,e,n,r,a){for(e&&(this.second+=Math.floor((86399-(3600*this.hour+60*this.minute+this.second))/t)*t);;){this.second+=t;const{div:e,mod:i}=(0,s.qq)(this.second,60);if(e&&(this.second=i,this.addMinutes(e,!1,n,r)),((0,s.cS)(n)||(0,s.q9)(n,this.hour))&&((0,s.cS)(r)||(0,s.q9)(r,this.minute))&&((0,s.cS)(a)||(0,s.q9)(a,this.second)))break}}fixDay(){if(this.day<=28)return;let t=r.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,13===this.month&&(this.month=1,++this.year,this.year>r.MAXYEAR))return;t=r.monthRange(this.year,this.month-1)[1]}}add(t,e){const{freq:n,interval:r,wkst:s,byhour:a,byminute:i,bysecond:o}=t;switch(n){case d.YEARLY:return this.addYears(r);case d.MONTHLY:return this.addMonths(r);case d.WEEKLY:return this.addWeekly(r,s);case d.DAILY:return this.addDaily(r);case d.HOURLY:return this.addHours(r,e,a);case d.MINUTELY:return this.addMinutes(r,e,a,i);case d.SECONDLY:return this.addSeconds(r,e,a,i,o)}}}function b(t){const e=[],n=Object.keys(t),r={};if(n.forEach((n=>{const i=t[n];r[n]=i,(0,s.q9)(tt,n)||e.push(n),a.isDate(i)&&!a.isValidDate(i)&&e.push(n)})),e.length)throw new Error("Invalid options: "+e.join(", "));return r}function w(t){return t.split("\n").map(k).filter((t=>null!==t)).reduce(((t,e)=>{let n;if(e.dtstart){if(t.dtstart)throw new Error("Invalid rule: DTSTART must occur only once");if(t.dtend&&t.dtend.valueOf()<=e.dtstart.valueOf())throw new Error("Invalid rule: DTEND must be later than DTSTART");n=t.dtend}if(e.dtend){if(t.dtend)throw new Error("Invalid rule: DTEND must occur only once");if(t.dtstart&&t.dtstart.valueOf()>=e.dtend.valueOf())throw new Error("Invalid rule: DTEND must be later than DTSTART");n=t.dtstart}if(n&&t.dtvalue!==e.dtvalue)throw new Error("Invalid rule: DTSTART and DTEND must have the same value type");if(n&&t.tzid!==e.tzid)throw new Error("Invalid rule: DTSTART and DTEND must have the same timezone");return Object.assign(t,e)}),{})||{}}function p(t,e=h.START){const n={},r=new RegExp(`${e}(?:;TZID=([^:=]+?))?(?:;VALUE=(DATE|DATE-TIME))?(?::|=)([^;\\s]+)`,"i").exec(t);if(!r)return n;const[s,i,o,d]=r;if(i){if(d.endsWith("Z"))throw new Error(`Invalid UTC date-time value with timezone: ${t}`);n.tzid=i}else d.endsWith("Z")&&(n.tzid="UTC");if(o===l.DATE){if(e===h.START?n.dtstart=a.fromRfc5545Date(d):n.dtend=a.fromRfc5545Date(d),n.dtvalue=l.DATE,n.tzid)throw new Error(`Invalid date value with timezone: ${t}`)}else e===h.START?n.dtstart=a.fromRfc5545DateTime(d):n.dtend=a.fromRfc5545DateTime(d),o&&(n.dtvalue=l.DATE_TIME);return n}function k(t){if(!(t=t.replace(/^\s+|\s+$/,"")).length)return null;const e=/^([A-Z]+?)[:;]/.exec(t.toUpperCase());if(!e)return E(t);const[n,r]=e;switch(r.toUpperCase()){case"RRULE":case"EXRULE":return E(t);case"DTSTART":return p(t,h.START);case"DTEND":return p(t,h.END);default:throw new Error(`Unsupported RFC prop ${r} in ${t}`)}}function E(t){const e=p(t.replace(/^RRULE:/i,""));return t.replace(/^(?:RRULE|EXRULE):/i,"").split(";").forEach((n=>{const[r,s]=n.split("=");switch(r.toUpperCase()){case"FREQ":e.freq=d[s.toUpperCase()];break;case"WKST":e.wkst=G[s.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":const n=function(t){return-1!==t.indexOf(",")?t.split(",").map(g):g(t)}(s),i=r.toLowerCase();e[i]=n;break;case"BYWEEKDAY":case"BYDAY":e.byweekday=function(t){return t.split(",").map((t=>{if(2===t.length)return G[t];const e=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/),n=Number(e[1]),r=e[2],s=G[r].weekday;return new y(s,n)}))}(s);break;case"DTSTART":case"TZID":const o=p(t);e.tzid=o.tzid,e.dtstart=o.dtstart,o.dtvalue&&(e.dtvalue=o.dtvalue);break;case"UNTIL":e.until=a.fromRfc5545DateTime(s);break;case"BYEASTER":e.byeaster=Number(s);break;default:throw new Error("Unknown RRULE property '"+r+"'")}})),e}function g(t){return/^[+-]?\d+$/.test(t)?Number(t):t}var T=n(223);class D{constructor(t,e){this.date=t,this.tzid=e}get isUTC(){return!this.tzid||"UTC"===this.tzid.toUpperCase()}toString(){const t=a.toRfc5545DateTime(this.date.getTime(),this.isUTC);return this.isUTC?`:${t}`:`;TZID=${this.tzid}:${t}`}getTime(){return this.date.getTime()}rezonedDate(){if(this.isUTC)return this.date;try{return T.DateTime.fromJSDate(this.date).setZone(this.tzid,{keepLocalTime:!0}).toJSDate()}catch(t){return t instanceof TypeError&&console.error("Using TZID without Luxon available is unsupported. Returned times are in UTC, not the requested time zone"),this.date}}}function x(t){let e=[],n="",r="";const i=Object.keys(t),o=Object.keys(Q);for(let d=0;d<i.length;d++){if("tzid"===i[d])continue;if(!(0,s.q9)(o,i[d]))continue;let u=i[d].toUpperCase();const c=t[i[d]];let f="";if((0,s.EN)(c)&&(!(0,s.kJ)(c)||c.length)){switch(u){case"FREQ":f=et.FREQUENCIES[t.freq];break;case"WKST":f=(0,s.hj)(c)?new y(c).toString():c.toString();break;case"BYWEEKDAY":u="BYDAY",f=(0,s.qo)(c).map((t=>t instanceof y?t:(0,s.kJ)(t)?new y(t[0],t[1]):new y(t))).toString();break;case"DTSTART":n=S(c,t,h.START);break;case"DTEND":r=S(c,t,h.END);break;case"DTVALUE":break;case"UNTIL":f=t.dtvalue===l.DATE?a.toRfc5545Date(c):a.toRfc5545DateTime(c,!!t.tzid);break;default:if((0,s.kJ)(c)){const t=[];for(let e=0;e<c.length;e++)t[e]=String(c[e]);f=t.toString()}else f=String(c)}f&&e.push([u,f])}}const d=e.map((([t,e])=>`${t}=${e.toString()}`)).join(";");let u="";return""!==d&&(u=`RRULE:${d}`),[n,r,u].filter((t=>!!t)).join("\n")}function S(t,e={},n=h.START){if(!t)return"";let r=n.toString();return e.dtvalue&&(r+=";VALUE="+e.dtvalue.toString()),e.tzid?r+new D(new Date(t),e.tzid).toString():e.dtvalue===l.DATE?r+":"+a.toRfc5545Date(t):r+":"+a.toRfc5545DateTime(t,!1)}class v{constructor(){this.all=!1,this.before=[],this.after=[],this.between=[]}_cacheAdd(t,e,n){e&&(e=e instanceof Date?a.clone(e):a.cloneDates(e)),"all"===t?this.all=e:(n._value=e,this[t].push(n))}_cacheGet(t,e){let n=!1;const r=e?Object.keys(e):[],o=function(t){for(let n=0;n<r.length;n++){const s=r[n];if(String(e[s])!==String(t[s]))return!0}return!1},h=this[t];if("all"===t)n=this.all;else if((0,s.kJ)(h))for(let t=0;t<h.length;t++){const e=h[t];if(!r.length||!o(e)){n=e._value;break}}if(!n&&this.all){const r=new i(t,e);for(let t=0;t<this.all.length&&r.accept(this.all[t]);t++);n=r.getValue(),this._cacheAdd(t,n,e)}return(0,s.kJ)(n)?a.cloneDates(n):n instanceof Date?a.clone(n):n}}const Y=[...(0,s.rx)(1,31),...(0,s.rx)(2,28),...(0,s.rx)(3,31),...(0,s.rx)(4,30),...(0,s.rx)(5,31),...(0,s.rx)(6,30),...(0,s.rx)(7,31),...(0,s.rx)(8,31),...(0,s.rx)(9,30),...(0,s.rx)(10,31),...(0,s.rx)(11,30),...(0,s.rx)(12,31),...(0,s.rx)(1,7)],U=[...(0,s.rx)(1,31),...(0,s.rx)(2,29),...(0,s.rx)(3,31),...(0,s.rx)(4,30),...(0,s.rx)(5,31),...(0,s.rx)(6,30),...(0,s.rx)(7,31),...(0,s.rx)(8,31),...(0,s.rx)(9,30),...(0,s.rx)(10,31),...(0,s.rx)(11,30),...(0,s.rx)(12,31),...(0,s.rx)(1,7)],O=(0,s.w6)(1,29),R=(0,s.w6)(1,30),L=(0,s.w6)(1,31),N=(0,s.w6)(1,32),M=[...N,...R,...N,...L,...N,...L,...N,...N,...L,...N,...L,...N,...N.slice(0,7)],A=[...N,...O,...N,...L,...N,...L,...N,...N,...L,...N,...L,...N,...N.slice(0,7)],_=(0,s.w6)(-28,0),I=(0,s.w6)(-29,0),C=(0,s.w6)(-30,0),q=(0,s.w6)(-31,0),W=[...q,...I,...q,...C,...q,...C,...q,...q,...C,...q,...C,...q,...q.slice(0,7)],j=[...q,..._,...q,...C,...q,...C,...q,...q,...C,...q,...C,...q,...q.slice(0,7)],z=[0,31,60,91,121,152,182,213,244,274,305,335,366],H=[0,31,59,90,120,151,181,212,243,273,304,334,365],F=function(){let t=[];for(let e=0;e<55;e++)t=t.concat((0,s.w6)(7));return t}();class ${constructor(t){this.options=t}rebuild(t,e){const n=this.options;if(t!==this.lastyear&&(this.yearinfo=function(t,e){const n=new Date(Date.UTC(t,0,1)),r=a.isLeapYear(t)?366:365,i=a.isLeapYear(t+1)?366:365,o=a.toOrdinal(n),h=a.getWeekday(n),l=Object.assign(Object.assign({yearlen:r,nextyearlen:i,yearordinal:o,yearweekday:h},function(t){const e=a.isLeapYear(t)?366:365,n=new Date(Date.UTC(t,0,1)),r=a.getWeekday(n);return 365===e?{mmask:Y,mdaymask:A,nmdaymask:j,wdaymask:F.slice(r),mrange:H}:{mmask:U,mdaymask:M,nmdaymask:W,wdaymask:F.slice(r),mrange:z}}(t)),{wnomask:null});if((0,s.cS)(e.byweekno))return l;let d,u;l.wnomask=(0,s.rx)(0,r+7);let c=d=(0,s.Vy)(7-h+e.wkst,7);c>=4?(c=0,u=l.yearlen+(0,s.Vy)(h-e.wkst,7)):u=r-c;const y=Math.floor(u/7),f=(0,s.Vy)(u,7),m=Math.floor(y+f/4);for(let t=0;t<e.byweekno.length;t++){let n,r=e.byweekno[t];if(r<0&&(r+=m+1),r>0&&r<=m){r>1?(n=c+7*(r-1),c!==d&&(n-=7-d)):n=c;for(let t=0;t<7&&(l.wnomask[n]=1,n++,l.wdaymask[n]!==e.wkst);t++);}}if((0,s.q9)(e.byweekno,1)){let t=c+7*m;if(c!==d&&(t-=7-d),t<r)for(let n=0;n<7&&(l.wnomask[t]=1,t+=1,l.wdaymask[t]!==e.wkst);n++);}if(c){let n;if((0,s.q9)(e.byweekno,-1))n=-1;else{const i=a.getWeekday(new Date(Date.UTC(t-1,0,1)));let o=(0,s.Vy)(7-i.valueOf()+e.wkst,7);const h=a.isLeapYear(t-1)?366:365;let l;o>=4?(o=0,l=h+(0,s.Vy)(i-e.wkst,7)):l=r-c,n=Math.floor(52+(0,s.Vy)(l,7)/4)}if((0,s.q9)(e.byweekno,n))for(let t=0;t<c;t++)l.wnomask[t]=1}return l}(t,n)),(0,s.Dw)(n.bynweekday)&&(e!==this.lastmonth||t!==this.lastyear)){const{yearlen:r,mrange:a,wdaymask:i}=this.yearinfo;this.monthinfo=function(t,e,n,r,a,i){const o={lastyear:t,lastmonth:e,nwdaymask:[]};let h=[];if(i.freq===et.YEARLY)if((0,s.cS)(i.bymonth))h=[[0,n]];else for(let t=0;t<i.bymonth.length;t++)e=i.bymonth[t],h.push(r.slice(e-1,e+1));else i.freq===et.MONTHLY&&(h=[r.slice(e-1,e+1)]);if((0,s.cS)(h))return o;o.nwdaymask=(0,s.rx)(0,n);for(let t=0;t<h.length;t++){const e=h[t],n=e[0],r=e[1]-1;for(let t=0;t<i.bynweekday.length;t++){let e;const[h,l]=i.bynweekday[t];l<0?(e=r+7*(l+1),e-=(0,s.Vy)(a[e]-h,7)):(e=n+7*(l-1),e+=(0,s.Vy)(7-a[e]+h,7)),n<=e&&e<=r&&(o.nwdaymask[e]=1)}}return o}(t,e,r,a,i,n)}(0,s.EN)(n.byeaster)&&(this.eastermask=function(t,e=0){const n=t%19,r=Math.floor(t/100),s=t%100,a=Math.floor(r/4),i=r%4,o=Math.floor((r+8)/25),h=Math.floor((r-o+1)/3),l=Math.floor(19*n+r-a-h+15)%30,d=Math.floor(s/4),u=s%4,c=Math.floor(32+2*i+2*d-l-u)%7,y=Math.floor((n+11*l+22*c)/451),f=Math.floor((l+c-7*y+114)/31),m=(l+c-7*y+114)%31+1,b=Date.UTC(t,f-1,m+e),w=Date.UTC(t,0,1);return[Math.ceil((b-w)/864e5)]}(t,n.byeaster))}get lastyear(){return this.monthinfo?this.monthinfo.lastyear:null}get lastmonth(){return this.monthinfo?this.monthinfo.lastmonth:null}get yearlen(){return this.yearinfo.yearlen}get yearordinal(){return this.yearinfo.yearordinal}get mrange(){return this.yearinfo.mrange}get wdaymask(){return this.yearinfo.wdaymask}get mmask(){return this.yearinfo.mmask}get wnomask(){return this.yearinfo.wnomask}get nwdaymask(){return this.monthinfo?this.monthinfo.nwdaymask:[]}get nextyearlen(){return this.yearinfo.nextyearlen}get mdaymask(){return this.yearinfo.mdaymask}get nmdaymask(){return this.yearinfo.nmdaymask}ydayset(){return[(0,s.w6)(this.yearlen),0,this.yearlen]}mdayset(t,e,n){const r=this.mrange[e-1],a=this.mrange[e],i=(0,s.rx)(null,this.yearlen);for(let t=r;t<a;t++)i[t]=t;return[i,r,a]}wdayset(t,e,n){const r=(0,s.rx)(null,this.yearlen+7);let i=a.toOrdinal(new Date(Date.UTC(t,e-1,n)))-this.yearordinal;const o=i;for(let t=0;t<7&&(r[i]=i,++i,this.wdaymask[i]!==this.options.wkst);t++);return[r,o,i]}ddayset(t,e,n){const r=(0,s.rx)(null,this.yearlen),i=a.toOrdinal(new Date(Date.UTC(t,e-1,n)))-this.yearordinal;return r[i]=i,[r,i,i+1]}htimeset(t,e,n,r){let s=[];return this.options.byminute.forEach((e=>{s=s.concat(this.mtimeset(t,e,n,r))})),a.sort(s),s}mtimeset(t,e,n,r){const s=this.options.bysecond.map((n=>new f(t,e,n,r)));return a.sort(s),s}stimeset(t,e,n,r){return[new f(t,e,n,r)]}getdayset(t){switch(t){case d.YEARLY:return this.ydayset.bind(this);case d.MONTHLY:return this.mdayset.bind(this);case d.WEEKLY:return this.wdayset.bind(this);case d.DAILY:default:return this.ddayset.bind(this)}}gettimeset(t){switch(t){case d.HOURLY:return this.htimeset.bind(this);case d.MINUTELY:return this.mtimeset.bind(this);case d.SECONDLY:return this.stimeset.bind(this)}}}function V(t,e,n,r,i,o){const h=[];for(let l=0;l<t.length;l++){let d,u;const c=t[l];c<0?(d=Math.floor(c/e.length),u=(0,s.Vy)(c,e.length)):(d=Math.floor((c-1)/e.length),u=(0,s.Vy)(c-1,e.length));const y=[];for(let t=n;t<r;t++){const e=o[t];(0,s.EN)(e)&&y.push(e)}let f;f=d<0?y.slice(d)[0]:y[d];const m=e[u],b=a.fromOrdinal(i.yearordinal+f),w=a.combine(b,m);(0,s.q9)(h,w)||h.push(w)}return a.sort(h),h}function K(t,e){const{dtstart:n,freq:r,interval:i,until:o,bysetpos:h}=e;let l=e.count;if(0===l||0===i)return P(t);let d=m.fromDate(n);const c=new $(e);c.rebuild(d.year,d.month);let y=function(t,e,n){const{freq:r,byhour:a,byminute:i,bysecond:o}=n;return u(r)?function(t){const e=t.dtstart.getTime()%1e3;if(!u(t.freq))return[];const n=[];return t.byhour.forEach((r=>{t.byminute.forEach((s=>{t.bysecond.forEach((t=>{n.push(new f(r,s,t,e))}))}))})),n}(n):r>=et.HOURLY&&(0,s.Dw)(a)&&!(0,s.q9)(a,e.hour)||r>=et.MINUTELY&&(0,s.Dw)(i)&&!(0,s.q9)(i,e.minute)||r>=et.SECONDLY&&(0,s.Dw)(o)&&!(0,s.q9)(o,e.second)?[]:t.gettimeset(r)(e.hour,e.minute,e.second,e.millisecond)}(c,d,e);for(;;){let[i,f,m]=c.getdayset(r)(d.year,d.month,d.day),b=Z(i,f,m,c,e);if((0,s.Dw)(h)){const r=V(h,y,f,m,c,i);for(let s=0;s<r.length;s++){const a=r[s];if(o&&a>o)return P(t);if(a>=n){const n=J(a,e);if(!t.accept(n))return P(t);if(l&&(--l,!l))return P(t)}}}else for(let r=f;r<m;r++){const h=i[r];if(!(0,s.EN)(h))continue;const d=a.fromOrdinal(c.yearordinal+h);for(let r=0;r<y.length;r++){const s=y[r],i=a.combine(d,s);if(o&&i>o)return P(t);if(i>=n){const n=J(i,e);if(!t.accept(n))return P(t);if(l&&(--l,!l))return P(t)}}}if(0===e.interval)return P(t);if(d.add(e,b),d.year>a.MAXYEAR)return P(t);u(r)||(y=c.gettimeset(r)(d.hour,d.minute,d.second,0)),c.rebuild(d.year,d.month)}}function B(t,e,n){const{bymonth:r,byweekno:a,byweekday:i,byeaster:o,bymonthday:h,bynmonthday:l,byyearday:d}=n;return(0,s.Dw)(r)&&!(0,s.q9)(r,t.mmask[e])||(0,s.Dw)(a)&&!t.wnomask[e]||(0,s.Dw)(i)&&!(0,s.q9)(i,t.wdaymask[e])||(0,s.Dw)(t.nwdaymask)&&!t.nwdaymask[e]||null!==o&&!(0,s.q9)(t.eastermask,e)||((0,s.Dw)(h)||(0,s.Dw)(l))&&!(0,s.q9)(h,t.mdaymask[e])&&!(0,s.q9)(l,t.nmdaymask[e])||(0,s.Dw)(d)&&(e<t.yearlen&&!(0,s.q9)(d,e+1)&&!(0,s.q9)(d,-t.yearlen+e)||e>=t.yearlen&&!(0,s.q9)(d,e+1-t.yearlen)&&!(0,s.q9)(d,-t.nextyearlen+e-t.yearlen))}function J(t,e){return new D(t,e.tzid).rezonedDate()}function P(t){return t.getValue()}function Z(t,e,n,r,s){let a=!1;for(let i=e;i<n;i++){let e=t[i];a=B(r,e,s),a&&(t[e]=null)}return a}const X=function(){return X._nlp||(X._nlp=n(705)),X._nlp},G={MO:new y(0),TU:new y(1),WE:new y(2),TH:new y(3),FR:new y(4),SA:new y(5),SU:new y(6)},Q={freq:d.YEARLY,dtstart:null,dtend:null,dtvalue:l.DATE_TIME,interval:1,wkst:G.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},tt=Object.keys(Q);class et{constructor(t={},e=!1){this._cache=e?null:new v,this.origOptions=b(t);const{parsedOptions:n}=function(t){const e=b(t),n=Object.keys(t);if(tt.forEach((t=>{(0,s.q9)(n,t)&&(0,s.EN)(e[t])||(e[t]=Q[t])})),(0,s.EN)(e.byeaster)&&(e.freq=et.YEARLY),!(0,s.EN)(e.freq)||!et.FREQUENCIES[e.freq])throw new Error(`Invalid frequency: ${e.freq} ${t.freq}`);if(e.dtstart||(e.dtstart=new Date((new Date).setMilliseconds(0))),(0,s.EN)(e.wkst)?(0,s.hj)(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=et.MO.weekday,(0,s.EN)(e.bysetpos)){(0,s.hj)(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(let t=0;t<e.bysetpos.length;t++){const n=e.bysetpos[t];if(0===n||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||(0,s.Dw)(e.byweekno)||(0,s.Dw)(e.byyearday)||Boolean(e.bymonthday)||(0,s.Dw)(e.bymonthday)||(0,s.EN)(e.byweekday)||(0,s.EN)(e.byeaster)))switch(e.freq){case et.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case et.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case et.WEEKLY:e.byweekday=[a.getWeekday(e.dtstart)]}if((0,s.EN)(e.bymonth)&&!(0,s.kJ)(e.bymonth)&&(e.bymonth=[e.bymonth]),(0,s.EN)(e.byyearday)&&!(0,s.kJ)(e.byyearday)&&(0,s.hj)(e.byyearday)&&(e.byyearday=[e.byyearday]),(0,s.EN)(e.bymonthday))if((0,s.kJ)(e.bymonthday)){const t=[],n=[];for(let r=0;r<e.bymonthday.length;r++){const s=e.bymonthday[r];s>0?t.push(s):s<0&&n.push(s)}e.bymonthday=t,e.bynmonthday=n}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);else e.bymonthday=[],e.bynmonthday=[];if((0,s.EN)(e.byweekno)&&!(0,s.kJ)(e.byweekno)&&(e.byweekno=[e.byweekno]),(0,s.EN)(e.byweekday))if((0,s.hj)(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(e.byweekday instanceof y)!e.byweekday.n||e.freq>et.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{const t=[],n=[];for(let r=0;r<e.byweekday.length;r++){const a=e.byweekday[r];if((0,s.hj)(a)){t.push(a);continue}const i=a;!i.n||e.freq>et.MONTHLY?t.push(i.weekday):n.push([i.weekday,i.n])}e.byweekday=(0,s.Dw)(t)?t:null,e.bynweekday=(0,s.Dw)(n)?n:null}else e.bynweekday=null;return(0,s.EN)(e.byhour)?(0,s.hj)(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<et.HOURLY?[e.dtstart.getUTCHours()]:null,(0,s.EN)(e.byminute)?(0,s.hj)(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<et.MINUTELY?[e.dtstart.getUTCMinutes()]:null,(0,s.EN)(e.bysecond)?(0,s.hj)(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<et.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}(t);this.options=n}static parseText(t,e){return X().parseText(t,e)}static fromText(t,e){return X().fromText(t,e)}static fromString(t){return new et(et.parseString(t)||void 0)}_iter(t){return K(t,this.options)}_cacheGet(t,e){return!!this._cache&&this._cache._cacheGet(t,e)}_cacheAdd(t,e,n){if(this._cache)return this._cache._cacheAdd(t,e,n)}all(t){if(t)return this._iter(new o("all",{},t));let e=this._cacheGet("all");return!1===e&&(e=this._iter(new i("all",{})),this._cacheAdd("all",e)),e}between(t,e,n=!1,r){if(!a.isValidDate(t)||!a.isValidDate(e))throw new Error("Invalid date passed in to RRule.between");const s={before:e,after:t,inc:n};if(r)return this._iter(new o("between",s,r));let h=this._cacheGet("between",s);return!1===h&&(h=this._iter(new i("between",s)),this._cacheAdd("between",h,s)),h}before(t,e=!1){if(!a.isValidDate(t))throw new Error("Invalid date passed in to RRule.before");const n={dt:t,inc:e};let r=this._cacheGet("before",n);return!1===r&&(r=this._iter(new i("before",n)),this._cacheAdd("before",r,n)),r}after(t,e=!1){if(!a.isValidDate(t))throw new Error("Invalid date passed in to RRule.after");const n={dt:t,inc:e};let r=this._cacheGet("after",n);return!1===r&&(r=this._iter(new i("after",n)),this._cacheAdd("after",r,n)),r}count(){return this.all().length}toString(){return x(this.origOptions)}toText(t,e,n){return X().toText(this,t,e,n)}isFullyConvertibleToText(){return X().isFullyConvertible(this)}clone(){return new et(this.origOptions)}}et.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],et.YEARLY=d.YEARLY,et.MONTHLY=d.MONTHLY,et.WEEKLY=d.WEEKLY,et.DAILY=d.DAILY,et.HOURLY=d.HOURLY,et.MINUTELY=d.MINUTELY,et.SECONDLY=d.SECONDLY,et.MO=G.MO,et.TU=G.TU,et.WE=G.WE,et.TH=G.TH,et.FR=G.FR,et.SA=G.SA,et.SU=G.SU,et.parseString=w,et.optionsToString=x;const nt={dtstart:null,dtend:null,dtvalue:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function rt(t,e={}){return function(t,e){const{rrulevals:n,rdatevals:r,exrulevals:a,exdatevals:i,dtstart:o,dtend:l,dtvalue:d,tzid:u}=function(t,e){let n=[],r=[],a=[],i=[],{dtstart:o,dtvalue:l,tzid:d}=p(t),u=null;return function(t,e=!1){if(!(t=t&&t.trim()))throw new Error("Invalid empty string");if(!e)return t.split(/\s/);const n=t.split("\n");let r=0;for(;r<n.length;){const t=n[r]=n[r].replace(/\s+$/g,"");t?r>0&&" "===t[0]?(n[r-1]+=t.slice(1),n.splice(r,1)):r+=1:n.splice(r,1)}return n}(t,e.unfold).forEach((e=>{if(!e)return;const{name:c,parms:y,value:f}=function(t){const{name:e,value:n}=function(t){if(-1===t.indexOf(":"))return{name:"RRULE",value:t};const[e,n]=(0,s.Vl)(t,":",1);return{name:e,value:n}}(t);let r=e.split(";");if(!r)throw new Error("empty property name");return{name:r[0].toUpperCase(),parms:r.slice(1),value:n}}(e);switch(c.toUpperCase()){case"RRULE":if(y.length)throw new Error(`unsupported RRULE parm: ${y.join(",")}`);n.push(w(e));break;case"RDATE":const[s,m]=/RDATE(?:;TZID=([^:=]+))?/i.exec(e);m&&!d&&(d=m),r=r.concat(at(f,y));break;case"EXRULE":if(y.length)throw new Error(`unsupported EXRULE parm: ${y.join(",")}`);a.push(w(f));break;case"EXDATE":i=i.concat(at(f,y));break;case"DTSTART":break;case"DTEND":let b=p(t,h.END);if(b.dtend){if(u)throw new Error("Invalid rule: DTEND must occur only once");if(o&&o.valueOf()>=b.dtend.valueOf())throw new Error("Invalid rule: DTEND must be later than DTSTART");if(o&&l!==b.dtvalue)throw new Error("Invalid rule: DTSTART and DTEND must have the same value type");if(o&&d!==b.tzid)throw new Error("Invalid rule: DTSTART and DTEND must have the same timezone");u=b.dtend}break;default:throw new Error("unsupported property: "+c)}})),{dtstart:o,dtend:u,dtvalue:l,tzid:d,rrulevals:n,rdatevals:r,exrulevals:a,exdatevals:i}}(t,e),c=!1===e.cache;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||r.length||a.length||i.length){const t=new ot(c);return t.dtstart(o),t.dtend(l),t.tzid(u||void 0),n.forEach((e=>{t.rrule(new et(st(e,o,l,d,u),c))})),r.forEach((e=>{t.rdate(e)})),a.forEach((e=>{t.exrule(new et(st(e,o,l,d,u),c))})),i.forEach((e=>{t.exdate(e)})),e.compatible&&e.dtstart&&t.rdate(o),t}const y=n[0]||{};return new et(st(y,y.dtstart||e.dtstart||o,y.dtend||e.dtend||l,y.dtvalue||e.dtvalue||d,y.tzid||e.tzid||u),c)}(t,function(t){const e=[],n=Object.keys(t),r=Object.keys(nt);if(n.forEach((function(t){(0,s.q9)(r,t)||e.push(t)})),e.length)throw new Error("Invalid options: "+e.join(", "));const a=Object.assign({},t);return r.forEach((function(t){(0,s.q9)(n,t)||(a[t]=nt[t])})),a}(e))}function st(t,e,n,r,s){return Object.assign(Object.assign({},t),{dtstart:e,dtend:n,dtvalue:r,tzid:s})}function at(t,e){return function(t){t.forEach((t=>{if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)}))}(e),t.split(",").map((t=>a.fromRfc5545DateTime(t)))}function it(t){return e=>{if(void 0!==e&&(this[`_${t}`]=e),void 0!==this[`_${t}`])return this[`_${t}`];for(let e=0;e<this._rrule.length;e++){const n=this._rrule[e].origOptions[t];if(n)return n}}}class ot extends et{constructor(t=!1){super({},t),this.dtstart=it.apply(this,["dtstart"]),this.dtend=it.apply(this,["dtend"]),this.tzid=it.apply(this,["tzid"]),this._rrule=[],this._rdate=[],this._exrule=[],this._exdate=[]}_iter(t){return function(t,e,n,r,s,i){const o={},h=t.accept;function l(t,e){n.forEach((function(n){n.between(t,e,!0).forEach((function(t){o[Number(t)]=!0}))}))}s.forEach((function(t){const e=new D(t,i).rezonedDate();o[Number(e)]=!0})),t.accept=function(t){const e=Number(t);return!(!o[e]&&(l(new Date(e-1),new Date(e+1)),!o[e]))||(o[e]=!0,h.call(this,t))},"between"===t.method&&(l(t.args.after,t.args.before),t.accept=function(t){const e=Number(t);return!!o[e]||(o[e]=!0,h.call(this,t))});for(let e=0;e<r.length;e++){const n=new D(r[e],i).rezonedDate();if(!t.accept(new Date(n.getTime())))break}e.forEach((function(e){K(t,e.options)}));const d=t._result;switch(a.sort(d),t.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())}rrule(t){ht(t,this._rrule)}exrule(t){ht(t,this._exrule)}rdate(t){lt(t,this._rdate)}exdate(t){lt(t,this._exdate)}rrules(){return this._rrule.map((t=>rt(t.toString())))}exrules(){return this._exrule.map((t=>rt(t.toString())))}rdates(){return this._rdate.map((t=>new Date(t.getTime())))}exdates(){return this._exdate.map((t=>new Date(t.getTime())))}valueOf(){let t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(x({dtstart:this._dtstart,tzid:this._tzid}))),!this._rrule.length&&this._dtend&&(t=t.concat(x({dtend:this._dtend,tzid:this._tzid}))),this._rrule.forEach((function(e){t=t.concat(e.toString().split("\n"))})),this._exrule.forEach((function(e){t=t.concat(e.toString().split("\n").map((t=>t.replace(/^RRULE:/,"EXRULE:"))).filter((t=>!/^DTSTART/.test(t))))})),this._rdate.length&&t.push(dt("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(dt("EXDATE",this._exdate,this.tzid())),t}toString(){return this.valueOf().join("\n")}clone(){const t=new ot(!!this._cache);return this._rrule.forEach((e=>t.rrule(e.clone()))),this._exrule.forEach((e=>t.exrule(e.clone()))),this._rdate.forEach((e=>t.rdate(new Date(e.getTime())))),this._exdate.forEach((e=>t.exdate(new Date(e.getTime())))),t}}function ht(t,e){if(!(t instanceof et))throw new TypeError(String(t)+" is not RRule instance");(0,s.q9)(e.map(String),String(t))||e.push(t)}function lt(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");(0,s.q9)(e.map(Number),Number(t))||(e.push(t),a.sort(e))}function dt(t,e,n){const r=!n||"UTC"===n.toUpperCase();return`${r?`${t}:`:`${t};TZID=${n}:`}${e.map((t=>a.toRfc5545DateTime(t.valueOf(),r))).join(",")}`}const ut=et},705:(t,e,n)=>{n.r(e),n.d(e,{fromText:()=>c,isFullyConvertible:()=>m,parseText:()=>u,toText:()=>f});const r={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}};var s=n(906),a=n(382);const i=function(t,e){return-1!==t.indexOf(e)},o=t=>t.toString(),h=(t,e,n)=>`${e} ${n}, ${t}`;class l{constructor(t,e=o,n=r,s=h){if(this.text=[],this.language=n||r,this.gettext=e,this.dateFormatter=s,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){const t=[].concat(this.options.bymonthday),e=[].concat(this.options.bynmonthday);t.sort(((t,e)=>t-e)),e.sort(((t,e)=>e-t)),this.bymonthday=t.concat(e),this.bymonthday.length||(this.bymonthday=null)}if((0,a.EN)(this.origOptions.byweekday)){const t=(0,a.kJ)(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],e=String(t);this.byweekday={allWeeks:t.filter((function(t){return!t.n})),someWeeks:t.filter((function(t){return Boolean(t.n)})),isWeekdays:-1!==e.indexOf("MO")&&-1!==e.indexOf("TU")&&-1!==e.indexOf("WE")&&-1!==e.indexOf("TH")&&-1!==e.indexOf("FR")&&-1===e.indexOf("SA")&&-1===e.indexOf("SU"),isEveryDay:-1!==e.indexOf("MO")&&-1!==e.indexOf("TU")&&-1!==e.indexOf("WE")&&-1!==e.indexOf("TH")&&-1!==e.indexOf("FR")&&-1!==e.indexOf("SA")&&-1!==e.indexOf("SU")};const n=function(t,e){return t.weekday-e.weekday};this.byweekday.allWeeks.sort(n),this.byweekday.someWeeks.sort(n),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}static isFullyConvertible(t){if(!(t.options.freq in l.IMPLEMENTED))return!1;if(t.origOptions.until&&t.origOptions.count)return!1;for(let e in t.origOptions){if(i(["dtstart","dtend","wkst","freq"],e))return!0;if(!i(l.IMPLEMENTED[t.options.freq],e))return!1}return!0}isFullyConvertible(){return l.isFullyConvertible(this.rrule)}toString(){const t=this.gettext;if(!(this.options.freq in l.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[s.default.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));const e=this.options.until;this.add(this.dateFormatter(e.getUTCFullYear(),this.language.monthNames[e.getUTCMonth()],e.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")}HOURLY(){const t=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))}MINUTELY(){const t=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.add((this.plural(this.options.interval),t("minutes")))}DAILY(){const t=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()}WEEKLY(){const t=this.gettext;1!==this.options.interval&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?1===this.options.interval?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(1===this.options.interval&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())}MONTHLY(){const t=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()}YEARLY(){const t=this.gettext;this.origOptions.bymonth?(1!==this.options.interval&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(1!==this.options.interval&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))}_bymonthday(){const t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))}_byweekday(){const t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))}_byhour(){const t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))}_bymonth(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))}nth(t){let e,n;t=parseInt(t.toString(),10);const r=this.gettext;if(-1===t)return r("last");switch(n=Math.abs(t),n){case 1:case 21:case 31:e=n+r("st");break;case 2:case 22:e=n+r("nd");break;case 3:case 23:e=n+r("rd");break;default:e=n+r("th")}return t<0?e+" "+r("last"):e}monthtext(t){return this.language.monthNames[t-1]}weekdaytext(t){const e=(0,a.hj)(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[e]}plural(t){return t%100!=1}add(t){return this.text.push(" "),this.text.push(t),this}list(t,e,n,r=","){(0,a.kJ)(t)||(t=[t]),e=e||function(t){return t.toString()};const s=this,i=function(t){return e&&e.call(s,t)};return n?function(t,e,n){let r="";for(let s=0;s<t.length;s++)0!==s&&(s===t.length-1?r+=" "+n+" ":r+=e+" "),r+=t[s];return r}(t.map(i),r,n):t.map(i).join(r+" ")}}class d{constructor(t){this.done=!0,this.rules=t}start(t){return this.text=t,this.done=!1,this.nextSymbol()}isDone(){return this.done&&null===this.symbol}nextSymbol(){let t,e;const n=this;this.symbol=null,this.value=null;do{if(this.done)return!1;let r;t=null;for(let s in this.rules){r=this.rules[s];const a=r.exec(n.text);a&&(null===t||a[0].length>t[0].length)&&(t=a,e=s)}if(null!=t&&(this.text=this.text.substr(t[0].length),""===this.text&&(this.done=!0)),null==t)return this.done=!0,this.symbol=null,void(this.value=null)}while("SKIP"===e);return this.symbol=e,this.value=t,!0}accept(t){if(this.symbol===t){if(this.value){const t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1}acceptNumber(){return this.accept("number")}expect(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)}}function u(t,e=r){const n={},a=new d(e.tokens);return a.start(t)?(function(){a.expect("every");let t=a.acceptNumber();if(t&&(n.interval=parseInt(t[0],10)),a.isDone())throw new Error("Unexpected end");switch(a.symbol){case"day(s)":n.freq=s.default.DAILY,a.nextSymbol()&&(function(){if(a.accept("at"))do{let t=a.acceptNumber();if(!t)throw new Error("Unexpected symbol "+a.symbol+", expected hour");for(n.byhour=[parseInt(t[0],10)];a.accept("comma");){if(t=a.acceptNumber(),!t)throw new Error("Unexpected symbol "+a.symbol+"; expected hour");n.byhour.push(parseInt(t[0],10))}}while(a.accept("comma")||a.accept("at"))}(),u());break;case"weekday(s)":n.freq=s.default.WEEKLY,n.byweekday=[s.default.MO,s.default.TU,s.default.WE,s.default.TH,s.default.FR],a.nextSymbol(),u();break;case"week(s)":n.freq=s.default.WEEKLY,a.nextSymbol()&&(i(),u());break;case"hour(s)":n.freq=s.default.HOURLY,a.nextSymbol()&&(i(),u());break;case"minute(s)":n.freq=s.default.MINUTELY,a.nextSymbol()&&(i(),u());break;case"month(s)":n.freq=s.default.MONTHLY,a.nextSymbol()&&(i(),u());break;case"year(s)":n.freq=s.default.YEARLY,a.nextSymbol()&&(i(),u());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=s.default.WEEKLY;const t=a.symbol.substr(0,2).toUpperCase();if(n.byweekday=[s.default[t]],!a.nextSymbol())return;for(;a.accept("comma");){if(a.isDone())throw new Error("Unexpected end");let t=h();if(!t)throw new Error("Unexpected symbol "+a.symbol+", expected weekday");n.byweekday.push(s.default[t]),a.nextSymbol()}!function(){a.accept("on"),a.accept("the");let t=l();if(t)for(n.bymonthday=[t],a.nextSymbol();a.accept("comma");){if(t=l(),!t)throw new Error("Unexpected symbol "+a.symbol+"; expected monthday");n.bymonthday.push(t),a.nextSymbol()}}(),u();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=s.default.YEARLY,n.bymonth=[o()],!a.nextSymbol())return;for(;a.accept("comma");){if(a.isDone())throw new Error("Unexpected end");let t=o();if(!t)throw new Error("Unexpected symbol "+a.symbol+", expected month");n.bymonth.push(t),a.nextSymbol()}i(),u();break;default:throw new Error("Unknown symbol")}}(),n):null;function i(){const t=a.accept("on"),e=a.accept("the");if(t||e)do{let t=l(),e=h(),r=o();if(t)e?(a.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(s.default[e].nth(t))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(t),a.accept("day(s)"));else if(e)a.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(s.default[e]);else if("weekday(s)"===a.symbol)a.nextSymbol(),n.byweekday||(n.byweekday=[s.default.MO,s.default.TU,s.default.WE,s.default.TH,s.default.FR]);else if("week(s)"===a.symbol){a.nextSymbol();let t=a.acceptNumber();if(!t)throw new Error("Unexpected symbol "+a.symbol+", expected week number");for(n.byweekno=[parseInt(t[0],10)];a.accept("comma");){if(t=a.acceptNumber(),!t)throw new Error("Unexpected symbol "+a.symbol+"; expected monthday");n.byweekno.push(parseInt(t[0],10))}}else{if(!r)return;a.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(r)}}while(a.accept("comma")||a.accept("the")||a.accept("on"))}function o(){switch(a.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function h(){switch(a.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return a.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(a.symbol){case"last":return a.nextSymbol(),-1;case"first":return a.nextSymbol(),1;case"second":return a.nextSymbol(),a.accept("last")?-2:2;case"third":return a.nextSymbol(),a.accept("last")?-3:3;case"nth":const t=parseInt(a.value[1],10);if(t<-366||t>366)throw new Error("Nth out of range: "+t);return a.nextSymbol(),a.accept("last")?-t:t;default:return!1}}function u(){if("until"===a.symbol){const t=Date.parse(a.text);if(!t)throw new Error("Cannot parse until date:"+a.text);n.until=new Date(t)}else a.accept("for")&&(n.count=parseInt(a.value[0],10),a.expect("number"))}}const c=function(t,e=r){return new s.default(u(t,e)||void 0)},y=["count","until","interval","byweekday","bymonthday","bymonth"];l.IMPLEMENTED=[],l.IMPLEMENTED[s.default.HOURLY]=y,l.IMPLEMENTED[s.default.MINUTELY]=y,l.IMPLEMENTED[s.default.DAILY]=["byhour"].concat(y),l.IMPLEMENTED[s.default.WEEKLY]=y,l.IMPLEMENTED[s.default.MONTHLY]=y,l.IMPLEMENTED[s.default.YEARLY]=["byweekno","byyearday"].concat(y);const f=function(t,e,n,r){return new l(t,e,n,r).toString()},{isFullyConvertible:m}=l},223:e=>{e.exports=t}},n={};function r(t){if(n[t])return n[t].exports;var s=n[t]={exports:{}};return e[t](s,s.exports,r),s.exports}return r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(906)})()}));
//# sourceMappingURL=rrule.js.map